<!doctype html>
<html>
	<head>
		<title>Goban</title>
		<meta charset="utf-8" />
		<script>
			var Goban = (function() {
				var exports = {};

				exports.Board = function (options)
				{
					var self = {};

					self.size = options.size;

					return self;
				};

				exports.CanvasView = function(options) {
					var self = {};

					self.backgroundColor = options.backgroundColor ? options.backgroundColor : 'rgb(172, 130, 70)';

					self.dom = options.document.getElementById(options.id);
					self.canvas = self.dom.getContext('2d');

					self.render = function(board) {
						self.writeBoard(board);
					};

					self.writeBoard = function(board) {
						self.writeBackground(board);
						self.canvas.fillStyle = 'rgb(0, 0, 0)';
						self.canvas.strokeStyle = 'rgb(0, 0, 0)';

						var unit_height = self.dom.height / board.size;
						var unit_width = self.dom.width / board.size;

						// vertical line
						for (var i = 0; i < board.size; i++ ) {
							self.canvas.beginPath();
							self.canvas.moveTo(unit_width / 2 + unit_width * i, unit_height / 2);
							self.canvas.lineTo(unit_width / 2 + unit_width * i, self.dom.height - unit_height / 2);
							self.canvas.closePath();
							self.canvas.stroke();
						}

						// horizontal line
						for ( var j = 0; j < board.size; j++ ) {
							self.canvas.beginPath();
							self.canvas.moveTo(unit_width / 2, unit_height / 2 + unit_height * j);
							self.canvas.lineTo(self.dom.width - unit_width / 2, unit_height / 2 + unit_height * j);
							self.canvas.closePath();
							self.canvas.stroke();
						}

					};

					self.writeBackground = function(board) {
						self.canvas.fillStyle = self.backgroundColor;
						self.canvas.fillRect(0, 0, self.dom.width, self.dom.height);
					}

					return self;
				};

				return exports;
			})();
		</script>
	</head>
	<body>
		<p>碁盤アプリのデモです</p>
		<canvas id="goban" width="300" height="300" />
		<script>
			var canvas = document.getElementById('goban');
			var ctx = canvas.getContext('2d');
			var board = new Goban.Board({
				size: 19,
			});

			var view = Goban.CanvasView({
				'document': document,
				id: 'goban',
			});
			view.render(board);
		</script>
	</body>
</html>
